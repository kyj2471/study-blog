
## - 인증 방식 소개

### 1. Session 기반 인증

**개념**

- **Session 기반 인증**은 서버에서 유저의 로그인 상태를 세션에 저장하고, 클라이언트는 세션 ID를 쿠키를 통해 서버에 전달합니다.
- 서버는 세션 ID를 확인하여 유저의 인증 상태를 확인합니다.

**장점**

- 서버 측에서 유저 상태를 관리하므로 중앙 집중식 관리가 가능.
- 세션 만료나 관리가 용이함.

**단점**

- 서버 메모리를 많이 사용할 수 있음.
- 서버 확장이 어려울 수 있음 (세션 스토리지 문제).

### 2. JWT (JSON Web Token) 기반 인증

**개념**

- **JWT 기반 인증**은 클라이언트가 로그인 시 JWT를 발급받고, 이후 요청 시 이 토큰을 Authorization 헤더를 통해 서버에 전달합니다.
- 서버는 토큰을 검증하여 유저의 인증 상태를 확인합니다.

**장점**

- 서버의 상태를 유지하지 않으므로 확장이 용이.
- 여러 서버에 걸쳐 상태를 공유할 필요 없음.

**단점**

- 토큰 유효성 관리가 복잡할 수 있음 (토큰 탈취 문제 등).
- 토큰 만료 후 재발급 방식의 구현이 필요.

## - 절충안: Session + JWT

### 개념

- **Session + JWT 하이브리드 방식**은 Session 기반 인증과 JWT 기반 인증을 조합하여 각각의 장점을 살리는 접근법입니다.
- 이 방식은 사용자 인증의 보안과 확장성을 동시에 고려하며, 다양한 서비스와 마이크로서비스 환경에서 유용하게 활용될 수 있습니다.

### 사용 시나리오

1. **사용자 인증**
    - 사용자 로그인 시, 서버는 세션을 생성하여 클라이언트에 세션 ID를 쿠키로 발급합니다.
    - 동시에, 서버는 JWT를 생성하여 클라이언트에 전달합니다.
2. **클라이언트-서버 통신**
    - **일반적인 요청**: 클라이언트는 세션 ID를 쿠키로 전송하여 서버에 인증을 요청합니다.
    - **API 요청**: 마이크로서비스 간의 요청이나 클라이언트가 특정 API를 호출할 때는 JWT를 Authorization 헤더에 포함시켜 인증을 수행합니다.
3. **마이크로서비스 통신**
    - **서비스 간 인증**: 마이크로서비스 간의 통신에는 JWT를 사용하여 인증합니다. 각 서비스는 JWT를 통해 유저의 권한을 검증하고, 토큰을 통해 상태를 전달합니다.
4. **토큰 및 세션 관리**
    - **세션 만료**: 서버는 세션을 관리하여 만료된 세션은 자동으로 제거합니다.
    - **토큰 만료**: JWT는 일정 시간 동안 유효하며, 필요 시 리프레시 토큰을 통해 새로운 JWT를 발급받을 수 있습니다.

### 장점

- **확장성**: JWT를 사용하여 서비스 간의 통신을 효율적으로 관리하고, 서버의 세션 상태 관리를 줄입니다.
- **보안**: 세션을 사용하여 세션 기반의 보안을 제공하면서, JWT를 사용하여 다양한 서비스 간의 인증을 보장합니다.
- **유연성**: 클라이언트와 서버 간의 인증뿐만 아니라 마이크로서비스 간의 인증에도 적합합니다.

### 단점

- **구현 복잡성**: 두 가지 인증 방식을 조합하는 만큼 구현과 유지 관리가 복잡할 수 있습니다.
- **관리 오버헤드**: 세션과 JWT를 모두 관리해야 하므로 추가적인 관리가 필요합니다.

## - 요약

- **Session 기반 인증**은 서버에서 유저 상태를 관리하며, 중앙 집중식 관리가 가능하지만 서버 확장이 어려울 수 있습니다.
- **JWT 기반 인증**은 클라이언트에서 토큰을 관리하여 서버의 상태를 유지하지 않으며, 확장이 용이하지만 보안 관리가 필요합니다.
- **하이브리드 접근법**은 Session과 JWT를 조합하여 각각의 장점을 살리며, 보안과 확장성을 모두 고려한 접근 방법입니다.