# ì›¹ ì„±ëŠ¥ ì¸¡ì • ë„êµ¬

### Lighthouse

LighthouseëŠ” ì›¹ íŽ˜ì´ì§€ ì„±ëŠ¥ì— ëŒ€í•œ ì ìˆ˜ ì§€í‘œë¥¼ ì œê³µí•˜ê³  ì›¹ íŽ˜ì´ì§€ì— ê°œì„  í•„ìš”í•œ ë¶€ë¶„ì— ëŒ€í•œ ì•ˆë‚´ë¥¼ ì œê³µí•œë‹¤. í‰ì†Œ ìž‘ì—…ì„ í•˜ë©´ì„œ ê°€ìž¥ë§Žì´ ì‚¬ìš©í–ˆì—ˆë‹¤ ì•„ëž˜ ì´ë¯¸ì§€ì˜ ì™¼íŽ¸ì´ mobile web, ìš°ì¸¡ì´ webì˜ ê²°ê³¼ì´ë‹¤.

![KakaoTalk_Photo_2024-07-20-11-33-46 027.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ad79c095-c62e-4268-8fe9-c9d202ae92f5/5537a3a3-ce7a-4bf2-aaf6-7dc3e0c0228c/KakaoTalk_Photo_2024-07-20-11-33-46_027.png)

![KakaoTalk_Photo_2024-07-20-11-33-43 003.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ad79c095-c62e-4268-8fe9-c9d202ae92f5/491e0d98-948f-435e-94c2-83b4aeae51fc/KakaoTalk_Photo_2024-07-20-11-33-43_003.png)

ì¸¡ì • í•­ëª© ì¤‘ PerformanceëŠ” í™”ë©´ì— ì½˜í…ì¸ ê°€ ì–¼ë§ˆë‚˜ ë¹¨ë¦¬ í‘œì‹œë˜ê³  ì‚¬ìš©ìžëŠ” ì–¼ë§ˆë‚˜ ë¹ ë¥´ê²Œ í™”ë©´ì„ ë³¼ ìˆ˜ ìžˆëŠ”ì§€ì— ì´ˆì ì„ ë§žì¶˜ë‹¤.

**- First Contentful Paint (FCP)** íŽ˜ì´ì§€ê°€ ë¡œë“œë˜ê¸° ì‹œìž‘í•œ ì‹œì ë¶€í„° íŽ˜ì´ì§€ ì½˜í…ì¸ ì˜ ì¼ë¶€ê°€ í™”ë©´ì— ë Œë”ë§ ë  ë•Œê¹Œì§€ì˜ ì‹œê°„ì„ ì¸¡ì •í•©ë‹ˆë‹¤.

**- Speed Index** íŽ˜ì´ì§€ë¥¼ ë¡œë“œ ì¤‘ì— ì–¼ë§ˆë‚˜ ë¹¨ë¦¬ ì½˜í…ì¸ ê°€ ì‹œê°ì ìœ¼ë¡œ í‘œì‹œë˜ëŠ”ì§€ ì†ë„ë¥¼ ì¸¡ì •í•©ë‹ˆë‹¤.

**- Largest Contentful Paint (LCP)** íŽ˜ì´ì§€ê°€ ì²˜ìŒìœ¼ë¡œ ë¡œë“œë¥¼ ì‹œìž‘í•œ ì‹œì ë¶€í„° ê°€ìž¥ í° ì´ë¯¸ì§€ë‚˜ í…ìŠ¤íŠ¸ì˜ ë Œë”ë§ ì‹œê°„ì„ ì¸¡ì •í•©ë‹ˆë‹¤.

**- Time to Interactive (TTI)** ì‚¬ìš©ìžê°€ íŽ˜ì´ì§€ì™€ ìƒí˜¸ìž‘ìš©ì´ ê°€ëŠ¥í•˜ê¸°ê¹Œì§€ì˜ ì‹œê°„ì„ ì¸¡ì •í•©ë‹ˆë‹¤.

**- Total Blocking Time (TBT)** ë©”ì¸ ìŠ¤ë ˆë“œê°€ ì‘ë‹µí•˜ì§€ ëª»í•  ì •ë„ë¡œ ì˜¤ëž˜ ìž‘ì—…ì„ í•  ë•Œ FCPì™€ TTI ì‚¬ì´ì˜ ì‹œê°„ì„ ì¸¡ì •í•©ë‹ˆë‹¤.

**- Cumulative Layout Shift (CLS)** ì‚¬ìš©ìžê°€ ì˜ˆìƒì¹˜ ëª»í•œ ë ˆì´ì•„ì›ƒ ì´ë™ì„ ê²½í—˜í•˜ëŠ” ë¹ˆë„ë¥¼ ìˆ˜ëŸ‰í™”í•©ë‹ˆë‹¤

### Network (ë¦¬ì†ŒìŠ¤ ì¸¡ì •)

ê° íŽ˜ì´ì§€ì˜ ìš”ì²­ íšŸìˆ˜ (requests), ì „ì†¡ëœ ë°ì´í„° ì–‘ (transferred), ì‚¬ìš©í•œ ë¦¬ì†ŒìŠ¤ (resources), ì´ ì†Œìš” ì‹œê°„(finish)ë¥¼ ê°­ì³í•œ ì´ë¯¸ì§€ì´ë‹¤. ê°œì„  ì „ê³¼ ê°œì„  í›„ì˜ ì´ë¯¸ì§€ë¥¼ ë¹„êµí•˜ë©´ ì „ì²´ì ìœ¼ë¡œ ì¤„ì–´ë“  ìˆ˜ì¹˜ë¥¼ ë³¼ ìˆ˜ ìžˆë‹¤.

**ðŸ‘‰Â [í™ˆí”¼ë“œ] ê°œì„  ì „**

![3.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ad79c095-c62e-4268-8fe9-c9d202ae92f5/3559d2c7-be30-46d3-8d8d-966b9ad0b6f7/3.png)

**ðŸ‘‰ [í™ˆí”¼ë“œ] ê°œì„  í›„**

![4.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ad79c095-c62e-4268-8fe9-c9d202ae92f5/17aaf871-c422-418f-a100-166325e29d48/4.png)

**ðŸ‘‰ [ì•„ì´í…œ ìƒì„¸] ê°œì„  ì „**

![KakaoTalk_Photo_2024-07-20-11-33-43 008.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ad79c095-c62e-4268-8fe9-c9d202ae92f5/05baa749-3155-47ef-a1ca-db573cb9c2f2/KakaoTalk_Photo_2024-07-20-11-33-43_008.png)

**ðŸ‘‰ [ì•„ì´í…œ ìƒì„¸] ê°œì„  í›„**

![KakaoTalk_Photo_2024-07-20-11-33-44 009.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ad79c095-c62e-4268-8fe9-c9d202ae92f5/573b8eda-fe2f-4246-853c-260482217b6f/KakaoTalk_Photo_2024-07-20-11-33-44_009.png)

## PageSpeed Insights

PageSpeed InsightsëŠ” ë°ìŠ¤í¬í†± ë° íœ´ëŒ€ê¸°ê¸° ëª¨ë‘ì—ì„œ ì›¹ì‚¬ì´íŠ¸ì˜ ì†ë„ì™€ ì„±ëŠ¥ì„ ë¶„ì„í•˜ëŠ” êµ¬ê¸€ì—ì„œ ê°œë°œí•œ ë„êµ¬ì´ë‹¤. ë‹¤ì–‘í•œ ì„±ëŠ¥ ë©”íŠ¸ë¦­ì— ëŒ€í•œ ìžì„¸í•œ ë³´ê³ ì„œë¥¼ ì œê³µí•˜ê³  ì›¹ ì‚¬ì´íŠ¸ì˜ ì†ë„ì™€ ì‚¬ìš©ìž ê²½í—˜ì„ ìµœì í™”í•˜ëŠ” ë° ë„ì›€ì´ ë˜ëŠ” ê°œì„  ì‚¬í•­ì„ ì œì•ˆí•œë‹¤. ì´ ë„êµ¬ëŠ” êµ¬ê¸€ì—ì„œ ì§€ì†ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ëŠ” ì›¹ ì„±ëŠ¥ì— ëŒ€í•œ ëª¨ë²• ì‚¬ë¡€ ëª¨ìŒì„ ê¸°ë°˜ìœ¼ë¡œ í•œë‹¤. PageSpeed InsightsëŠ” íŽ˜ì´ì§€ ë¡œë“œ ì‹œê°„, ì²« ë²ˆì§¸ ë°”ì´íŠ¸ê¹Œì§€ ê±¸ë¦¬ëŠ” ì‹œê°„, ê¸°íƒ€ ì‚¬ìš©ìž ì¤‘ì‹¬ ì„±ëŠ¥ ì¸¡ì • í•­ëª©ê³¼ ê°™ì€ ë‹¤ì–‘í•œ ì¸¡ì •í•­ëª©ì„ ê¸°ë°˜ìœ¼ë¡œ ì›¹ì‚¬ì´íŠ¸ì˜ ì†ë„ì™€ ì„±ëŠ¥ì„ ë¶„ì„í•˜ê³  ìž‘ë™í•œë‹¤. ì´ë¯¸ì§€, JavaScript, CSSì— ëŒ€í•œ ìµœì í™” ì œì•ˆ, ì„œë²„ ì‘ë‹µ ì‹œê°„ ë° ë¸Œë¼ìš°ì € ìºì‹±ê³¼ ê°™ì€ ì›¹ ì‚¬ì´íŠ¸ì˜ ë‹¤ì–‘í•œ ì„±ëŠ¥ ì¸¡ë©´ì— ëŒ€í•œ ìžì„¸í•œ ë³´ê³ ì„œë¥¼ ì œê³µí•œë‹¤. ë˜í•œ ì´ ë„êµ¬ëŠ” ë°ìŠ¤í¬í†± ë° ëª¨ë°”ì¼ ìž¥ì¹˜ ëª¨ë‘ì— ëŒ€í•´ 0ì—ì„œ 100ê¹Œì§€ì˜ ë²”ìœ„ì—ì„œ ì›¹ ì‚¬ì´íŠ¸ì˜ ì†ë„ ë° ì„±ëŠ¥ì— ëŒ€í•œ ì ìˆ˜ë¥¼ ì œê³µí•œë‹¤.

### [ê°œì„  ì „ PageSpeed Insights]

![KakaoTalk_Photo_2024-07-20-11-33-43 001.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ad79c095-c62e-4268-8fe9-c9d202ae92f5/29afe247-a5bf-41d3-97ca-51f61ff7698e/KakaoTalk_Photo_2024-07-20-11-33-43_001.png)

![KakaoTalk_Photo_2024-07-20-11-33-44 012.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ad79c095-c62e-4268-8fe9-c9d202ae92f5/2af71dbc-b357-4f1e-b18a-f11fe6914c32/KakaoTalk_Photo_2024-07-20-11-33-44_012.png)

### [ê°œì„  í›„ PageSpeed Insights]

![KakaoTalk_Photo_2024-07-20-11-33-44 013.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ad79c095-c62e-4268-8fe9-c9d202ae92f5/4ab731f4-89c8-46a6-b710-60d097d00eb0/KakaoTalk_Photo_2024-07-20-11-33-44_013.png)

![KakaoTalk_Photo_2024-07-20-11-33-44 015.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ad79c095-c62e-4268-8fe9-c9d202ae92f5/63941f4b-129d-4474-a425-93b4ca0427df/KakaoTalk_Photo_2024-07-20-11-33-44_015.png)

![KakaoTalk_Photo_2024-07-20-11-33-44 014.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ad79c095-c62e-4268-8fe9-c9d202ae92f5/4e6f6f93-4ce4-4e24-afb7-90034f16572c/KakaoTalk_Photo_2024-07-20-11-33-44_014.png)

![KakaoTalk_Photo_2024-07-20-11-33-44 016.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ad79c095-c62e-4268-8fe9-c9d202ae92f5/93055fcb-cb52-445a-b710-5cbbc42b6afa/KakaoTalk_Photo_2024-07-20-11-33-44_016.png)

ðŸ”Â ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ìžë°”ìŠ¤í¬ë¦½íŠ¸ ì¤„ì´ê¸° â†’ 2.1ì´ˆ ðŸ”Â ìžë°”ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì‹œê°„ ë‹¨ì¶• â†’ 5.3ì´ˆ ðŸ”Â ê¸°ë³¸ ìŠ¤ë ˆë“œ ìž‘ì—… ìµœì†Œí™” â†’ 8.5ì´ˆ

## bundle-analyzerë¥¼ í†µí•œ ë¶„ì„

@zeit/next-bundle-analyzer ì„¤ì¹˜ `npm install --save @zeit/next-bundle-analyzer`

next.cpmfig.js íŒŒì¼ì— ì„¤ì •

```jsx
const withBundleAnalyzer = require('@zeit/next-bundle-analyzer');

module.exports = withPlugins(
  ...
  [
    withBundleAnalyzer,
    {
      analyzeServer: ['server', 'both'].includes(process.env.BUNDLE_ANALYZE),
      analyzeBrowser: ['browser', 'both'].includes(process.env.BUNDLE_ANALYZE),
      bundleAnalyzerConfig: {
        server: {
          analyzerMode: 'static',
          reportFilename: '../bundles/server.html'
        },
        browser: {
          analyzerMode: 'static',
          reportFilename: '../bundles/client.html'
        }
      }
    }
  ],
  ...
);

```

ì‹¤í–‰

`npm run analyze` `"analyze": "BUNDLE_ANALYZE=both npm run production-buildâ€`

ê²°ê³¼ í™•ì¸

ì™¼íŽ¸ì€ server ì˜¤ë¥¸íŽ¸ì€ clientì´ë‹¤.

![KakaoTalk_Photo_2024-07-20-11-33-44 017.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ad79c095-c62e-4268-8fe9-c9d202ae92f5/5f53f78e-6463-4899-8e89-a9c1da35a9de/KakaoTalk_Photo_2024-07-20-11-33-44_017.png)

![KakaoTalk_Photo_2024-07-20-11-33-45 018.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ad79c095-c62e-4268-8fe9-c9d202ae92f5/1913d954-4848-4afd-95de-d63d7e391c12/KakaoTalk_Photo_2024-07-20-11-33-45_018.png)

### [ë²ˆë“¤ ì‚¬ì´ì¦ˆ]

ê¸°ì¡´ ë²ˆë“¤ ì‚¬ì´ì¦ˆ ([ë²ˆë“¤ ì‚¬ì´ì¦ˆì— ëŒ€í•œ ì„¤ëª…](https://github.com/webpack-contrib/webpack-bundle-analyzer/issues/61))

- **stat**: ìµœì í™” ë˜ê¸° ì „ ì½”ë“œì˜ ë²ˆë“¤ ì‚¬ì´ì¦ˆ
- **parsed**: minimizeëœ íŒŒì¼ ì‚¬ì´ì¦ˆ (ë¸Œë¼ìš°ì €ì—ì„œ íŒŒì‹±ëœ ìžë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œì˜ ì‚¬ì´ì¦ˆ)
- **gzip**: minimizeì™€ gzipì„ ê±°ì¹œ í›„ì˜ ì‚¬ì´ì¦ˆ (ë„¤íŠ¸ì›Œí¬ì—ì„œ ë¡œë“œë  ë•Œì˜ ì‚¬ì´ì¦ˆ)

### ë¹Œë“œ ê²°ê³¼

ì™¼íŽ¸ì€ ìž‘ì—… ì „ ì˜¤ë¥¸íŽ¸ì€ ìž‘ì—… í›„ ì´ë‹¤.

![KakaoTalk_Photo_2024-07-20-11-33-45 019.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ad79c095-c62e-4268-8fe9-c9d202ae92f5/b085847b-57cc-4cfa-bb69-2d3b296efe71/KakaoTalk_Photo_2024-07-20-11-33-45_019.png)

![KakaoTalk_Photo_2024-07-20-11-33-45 020.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ad79c095-c62e-4268-8fe9-c9d202ae92f5/0f574313-ecf5-426a-8d19-f0e743a32969/KakaoTalk_Photo_2024-07-20-11-33-45_020.png)

ìš©ëŸ‰ì´ í° íŽ˜ì´ì§€ë§Œ ë¹„êµí•˜ë©´

- `/_app` 213KB â†’ 171KB
- `/item/detail` 167KB â†’ 260KB
- `/item/regist` 484KB â†’ 164KB
- `/search` 113KB â†’ 64.7KB

## javaScriptì™€ CSSì˜ ìµœì í™”

**- lodash (71K â†’ 3.4K)** loadash ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ debounce ë©”ì„œë“œë§Œ ì‚¬ìš©í•˜ê³  ìžˆê¸° ë•Œë¬¸ì— default importë¡œ ë³€ê²½í•˜ì˜€ë‹¤.

![KakaoTalk_Photo_2024-07-20-11-33-45 021.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ad79c095-c62e-4268-8fe9-c9d202ae92f5/7d56860b-498d-4a51-9603-abbaadc27e75/KakaoTalk_Photo_2024-07-20-11-33-45_021.png)

![KakaoTalk_Photo_2024-07-20-11-33-45 022.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ad79c095-c62e-4268-8fe9-c9d202ae92f5/f9ea313c-96f4-43f0-8e19-e725356eae47/KakaoTalk_Photo_2024-07-20-11-33-45_022.png)

**- lottie-web** ìƒí’ˆ ë“±ë¡ì‹œ AIë¡œë”© ì• ë‹ˆë©”ì´ì…˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ë° ìš©ëŸ‰ì´ 306kê°€ ë„˜ëŠ”ë‹¤. dynamic import ì‚¬ìš©

**- date-fns (31K â†’ 9.4K)** default importê°€ ì ìš©ë˜ëŠ” parse, format ì ìš©

![KakaoTalk_Photo_2024-07-20-11-33-45 023.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ad79c095-c62e-4268-8fe9-c9d202ae92f5/1f6f0f10-06ab-48de-858a-b73fac369e7d/KakaoTalk_Photo_2024-07-20-11-33-45_023.png)

![KakaoTalk_Photo_2024-07-20-11-33-45 024.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ad79c095-c62e-4268-8fe9-c9d202ae92f5/9f851e7a-544b-4554-91a8-77b18058df55/KakaoTalk_Photo_2024-07-20-11-33-45_024.png)

**- npm dedup** node_modulesì˜ ì‚¬ì´ì¦ˆë¥¼ ì¤„ì´ê³ , ì¢…ì†ì„±ì„ í‰íƒ„í™”(flatten)í•˜ê¸° ìœ„í•´ `npm dedup`ì„ í†µí•´ ì¤‘ë³µëœ ì¢…ì†ì„±ì„ ì •ë¦¬í•˜ì˜€ë‹¤.

**- webpack ë²ˆë“¤ ê²°ê³¼ ìš©ëŸ‰ ì¤„ì´ê¸° ìœ„í•´ treeShaking ì½”ë“œ ì¶”ê°€**

**UghlifyJsPlugin**: uglifyjs-webpack-plugin

```jsx
const UglifyJsPlugin = require('uglifyjs-webpack-plugin');
 // UglifyJsPlugin
  config.optimization.minimizer.push(
    new UglifyJsPlugin({
      cache: true,
      parallel: true,
      sourceMap: false,
      extractComments: true,
      uglifyOptions: {
        compress: true,
        output: {
          comments: false
        }
} })
);
```

**TerserPlugin**: uglifyjs-webpack-plugin â†’ terser webpack-plugin êµì²´

```jsx
const TerserPlugin = require('terser-webpack-plugin');
 // TerserPlugin
config.optimization.minimizer.push(
        new TerserPlugin({
          terserOptions: {
            compress: true,
            mangle: true,
            output: {
              comments: false
            }
},
          extractComments: true
        })
);
```

**êµì²´ë¥¼ ì§„í–‰í•œ ì´ìœ **

1. **TerserëŠ” ë” ìµœì‹ ì´ë©° í™œë°œížˆ ìœ ì§€ë³´ìˆ˜ëœë‹¤** : TerserëŠ” ë” ìµœê·¼ì— ê°œë°œëœ í™œë°œížˆ ìœ ì§€ë³´ìˆ˜ë˜ëŠ” JavaScript ìµœì†Œí™” ë¼ì´ë¸ŒëŸ¬ë¦¬ìž…ë‹ˆë‹¤. ë°˜ë©´ uglifyjs-webpack-pluginì€ UglifyJSë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ê³  ìžˆìœ¼ë©°, UglifyJSì—ëŠ” ì¼ë¶€ ë¬¸ì œê°€ ìžˆì—ˆê³  ìµœì‹  ì—…ë°ì´íŠ¸ê°€ í™œë°œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
2. **ë” ìž‘ì€ ê²°ê³¼ íŒŒì¼ í¬ê¸°** : TerserëŠ” UglifyJSë³´ë‹¤ ìž‘ì€ ê²°ê³¼ íŒŒì¼ í¬ê¸°ë¥¼ ìƒì„±í•˜ì—¬ ì›¹ì‚¬ì´íŠ¸ì™€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¹ ë¥¸ ë¡œë“œ ì‹œê°„ì„ ë„ì™€ì¤ë‹ˆë‹¤.
3. **ë³‘ë ¬ ì²˜ë¦¬** : TerserëŠ” ë³‘ë ¬ ì²˜ë¦¬ë¥¼ ì§€ì›í•˜ì—¬ ë‹¤ì¤‘ ì½”ì–´ ì‹œìŠ¤í…œì—ì„œë„ ë¹ ë¥¸ ìµœì†Œí™”ê°€ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ë¹Œë“œ ì‹œê°„ì´ í¬ê²Œ ë‹¨ì¶•ë  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
4. **ES ëª¨ë“ˆ ì§€ì›** : TerserëŠ” ES ëª¨ë“ˆ í˜•ì‹ì„ ë„¤ì´í‹°ë¸Œë¡œ ì§€ì›í•˜ë©°, í˜„ëŒ€ì ì¸ JavaScript í”„ë¡œì íŠ¸ì—ì„œ ES ëª¨ë“ˆì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì— ì¤‘ìš”í•©ë‹ˆë‹¤.

**CssMinimizerPlugin**: css-minimizer-webpack-plugin

```jsx
const CssMinimizerPlugin = require('css-minimizer-webpack-plugin');
config.optimization.minimizer.push(
        new TerserPlugin({
          terserOptions: {
            compress: true,
            mangle: true,
            output: {
              comments: false
            }
},
          extractComments: true
        }),
     // CssMinimizerPlugin
        new CssMinimizerPlugin()
      );
}
```

## Image Lazy Loading

`Image Lazy Loading`ì€ íŽ˜ì´ì§€ ì•ˆì— ìžˆëŠ” ì‹¤ì œ ì´ë¯¸ì§€ë“¤ì´ ì‹¤ì œë¡œ í™”ë©´ì— ë³´ì—¬ì§ˆ í•„ìš”ê°€ ìžˆì„ ë•Œ ë¡œë”©ì„ í•  ìˆ˜ ìžˆë„ë¡ í•˜ëŠ” ê¸°ìˆ ìž…ë‹ˆë‹¤. ì›¹ íŽ˜ì´ì§€ ë‚´ì—ì„œ ë°”ë¡œ ë¡œë”©ì„ í•˜ì§€ ì•Šê³  ë¡œë”© ì‹œì ì„ ë’¤ë¡œ ë¯¸ë£¨ëŠ” ê²ƒì´ë¼ ë³¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ ë°©ì‹ì€ ì›¹ ì„±ëŠ¥ê³¼ ë””ë°”ì´ìŠ¤ ë‚´ ë¦¬ì†ŒìŠ¤ í™œìš©ë„ ì¦ê°€, ê·¸ë¦¬ê³  ì—°ê´€ëœ ë¹„ìš©ì„ ì¤„ì´ëŠ”ë° ë„ì›€ì„ ì¤„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ìœ ì‚¬í•˜ê²Œ `lazy loading`ì€ íŽ˜ì´ì§€ ë‚´ì—ì„œ ì‹¤ì œë¡œ í•„ìš”ë¡œ í•  ë•Œê¹Œì§€ ë¦¬ì†ŒìŠ¤ì˜ ë¡œë”©ì„ ë¯¸ë£¨ëŠ” ê²ƒìž…ë‹ˆë‹¤. íŽ˜ì´ì§€ë¥¼ ë¡œë“œí•˜ìžë§ˆìž ë¦¬ì†ŒìŠ¤ë¥¼ ë¡œë”©í•˜ëŠ” ì¼ë°˜ì ì¸ ë°©ì‹ ëŒ€ì‹ , ì‹¤ì œë¡œ ì‚¬ìš©ìž í™”ë©´ì— ë³´ì—¬ì§ˆ í•„ìš”ê°€ ìžˆì„ ë•Œê¹Œì§€ ì´ëŸ¬í•œ ë¡œë”©ì„ ì§€ì—°í•˜ëŠ” ê²ƒìž…ë‹ˆë‹¤.

laze loadingì„ ë‹¤ë£¨ëŠ” ë°©ì‹ì€ íŽ˜ì´ì§€ ë‚´ì˜ ê±°ì˜ ëª¨ë“  ë¦¬ì†ŒìŠ¤ì— ì ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `SPA(Single Page Application)` ë‚´ì—ì„œ JS íŒŒì¼ì´ ë‚˜ì¤‘ì—ê¹Œì§€ í•„ìš”í•˜ì§€ ì•Šìœ¼ë©´ ì´ˆê¸°ì— ë¡œë“œí•´ì„œ ê°€ì ¸ì˜¤ì§€ ì•ŠëŠ” ê²ƒì´ ê°€ìž¥ ì¢‹ìŠµë‹ˆë‹¤. ì´ì²˜ëŸ¼ ì´ë¯¸ì§€ë„ ë°”ë¡œ ë³´ì—¬ì§ˆ í•„ìš”ê°€ ì—†ë‹¤ê°€, ì‹¤ì œë¡œ ë³´ì—¬ì§ˆ í•„ìš”ê°€ ìžˆì„ ë•Œ ë¡œë”©ì„ í•˜ëŠ” ê²ƒìž…ë‹ˆë‹¤.

### Intersection Observer API

ì´ APIëŠ” `element` ìš”ì†Œê°€ `view port`ì— ë“¤ì–´ê°€ëŠ” ê²ƒì„ ê°ì§€í•˜ê³  ì•¡ì…˜ì„ ì·¨í•˜ëŠ” ê²ƒì„ ì•„ì£¼ ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ì–´ ì£¼ê³  ì„±ëŠ¥ë©´ìœ¼ë¡œë„ ì¢‹ìŠµë‹ˆë‹¤.

`Event Listener`ë¥¼ ì‚¬ìš©í•´ì„œ Image lazy loadingì„ êµ¬í˜„í•  ìˆ˜ë„ ìžˆì§€ë§Œ `Intersection Observer`ë¥¼ ì‚¬ìš©í•œ ì´ìœ ëŠ” ì´ ë‘ ë°©ë²•ì— ëŒ€í•´ ì´ë¯¸ì§€ ë¡œë”© ì‹œê°„ì„ ë¹„êµí•´ë³´ì•˜ìŠµë‹ˆë‹¤. í›„ìžê°€ ì´ë¯¸ì§€ë¥¼ ë¡œë“œí•˜ëŠ” íŠ¸ë¦¬ê±°ê°€ ë¹ ë¥´ë©° ìŠ¤í¬ë¡¤í•  ë•Œ ì´ë¯¸ì§€ê°€ ëŠë¦¬ê²Œ ë‚˜íƒ€ë‚˜ì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì´ìš©í•œ ë°©ì‹ì€ ì„±ëŠ¥ì„ ìœ„í•´ timeoutì„ ì¶”ê°€í–ˆì—ˆëŠ”ë°, ì´ ë¶€ë¶„ì€ ì‚¬ìš©ì„± ì¸¡ë©´ì—ì„œ ì´ë¯¸ì§€ ë¡œë“œì— ì•½ê°„ì˜ ë”œë ˆì´ê°€ ë°œìƒí•˜ëŠ” ë¯¸ë¯¸í•œ ì˜í–¥ì„ ë¼ì¹©ë‹ˆë‹¤.

```jsx
// image lazy loading

import React, { useEffect, useState, useRef } from 'react';
import styled from 'styled-components';
import * as C from '../../constants/index';

const LazyImage = (props) => {
  const { src, alt, handleMouseOver, handleClick } = props;
  const [isLoading, setIsLoading] = useState(false);
  const imgRef = useRef(null);
  const observer = React.useRef();
  const emptyImgUrl = `${IMAGE_URL}${C.URL.IMAGE.EMPTY.THUMBNAIL}`;

  useEffect(() => {
    observer.current = new IntersectionObserver(intersectionObserver);
    imgRef.current && observer.current.observe(imgRef.current);
  }, []);

  const intersectionObserver = (entries, io) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        io.unobserve(entry.target);
        setIsLoading(true);
      }
    });
  };

  return (
    <S.ItemImg
      ref={imgRef}
      src={isLoading ? `${src}&f=webp` : emptyImgUrl}
      alt={alt}
      onMouseOver={handleMouseOver}
      onClick={handleClick}
    />
  );
};

const S = {
  ItemImg: styled.img`
    ...
  `,
};

export default LazyImage;

```

ì´ë¯¸ì§€ ë¡œë“œë¥¼ ì§€ì—°ì‹œí‚¤ê¸° ìœ„í•´ ëª¨ë“  ì´ë¯¸ì§€ì— ì˜µì €ë²„ë¥¼ ë¶€ì°©ì‹œí‚µë‹ˆë‹¤. ì—˜ë¦¬ë¨¼íŠ¸ê°€ ë·°í¬íŠ¸ì— ë“¤ì–´ê°„ ê²ƒì„ APIê°€ ê°ì§€í–ˆì„ ë•Œ, isIntersecting ì†ì„±ì„ ì´ìš©í•´ì„œ ì´ë¯¸ì§€ urlì„ image placeholder urlì—ì„œ ì‹¤ì œ ì•„ì´í…œ ì´ë¯¸ì§€ urlë¡œ ë¡œë“œí•˜ë„ë¡ íŠ¸ë¦¬ê±°ë¥¼ ì¼ìœ¼í‚µë‹ˆë‹¤.

ì ìš© ì™„ë£Œí•˜ê³  í…ŒìŠ¤íŠ¸ ì‹œ ìµœê³ ì ì„ ì°ê¸´ í–ˆì§€ë§Œ 35~45 ì •ë„ë¥¼ ìœ ì§€í•˜ê³  ìžˆì—ˆìŠµë‹ˆë‹¤.

![KakaoTalk_Photo_2024-07-20-11-33-45 025.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/ad79c095-c62e-4268-8fe9-c9d202ae92f5/197275c9-d464-4319-85c0-07f17c6584ff/KakaoTalk_Photo_2024-07-20-11-33-45_025.png)

## code splitting

### module code splitting

react-image-video-splitting ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ìš©ëŸ‰ì´ 513.8Kë¡œ í°íŽ¸ì´ë‹¤. ì• ì´ˆì— ì´ëŸ° ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì‚¬ìš©í•˜ì§€ ì•Šì•„ì•¼í•˜ëŠ”ë° ë ˆê±°ì‹œë¡œ í”„ë¡œì íŠ¸ì— ë§Žì€ ì˜í–¥ì„ ì£¼ê³ ìžˆì–´ dynamic importë¡œ ì‚¬ìš©í•˜ë„ë¡ ë˜ì–´ìžˆë‹¤.

```jsx
import loadable from '@loadable/component';

const ReactImageVideoLightbox = loadable(() => import('react-image-video-lightbox'));

export default ReactImageVideoLightbox;

```

**- swiper ê´€ë ¨ ëª¨ë“ˆ**

```jsx
import loadable from '@loadable/component';

const Swiper = loadable(() => import('swiper/react').then((module) => ({ default: module.Swiper })));
const SwiperSlide = loadable(() => import('swiper/react').then((module) => ({ default: module.SwiperSlide })));
const Navigation = loadable(() => import('swiper').then((module) => ({ default: module.Navigation })));
const Pagination = loadable(() => import('swiper').then((module) => ({ default: module.Pagination })));

export { Swiper, SwiperSlide, Navigation, Pagination };

```

**- React.lazy ì‚¬ìš©** React.lazyëŠ” default exportë§Œ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— named exportì¸ ê²½ìš°ì—ëŠ” ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬ í•„ìš”

```jsx
import React from 'react';

const Swiper = React.lazy(() => import('swiper/react'));
const SwiperSlide = React.lazy(() => import('swiper/react').then((module) => ({ default: module.SwiperSlide })));
const Navigation = React.lazy(() => import('swiper').then((module) => ({ default: module.Navigation })));
const Pagination = React.lazy(() => import('swiper').then((module) => ({ default: module.Pagination })));

export { Swiper, SwiperSlide, Navigation, Pagination };

```

**- useEffect í›… ì‚¬ìš©** ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ ëª¨ë“ˆ ë¹„ë™ê¸° import

```jsx
import { useState, useEffect } from 'react';

const SwiperLoader = () => {
  const [Swiper, setSwiper] = useState(null);
  const [SwiperSlide, setSwiperSlide] = useState(null);
  const [Navigation, setNavigation] = useState(null);
  const [Pagination, setPagination] = useState(null);

  useEffect(() => {
    const loadSwiperModules = async () => {
      const SwiperModule = await import('swiper/react');
      const { Swiper, SwiperSlide } = SwiperModule;
      setSwiper(Swiper);
      setSwiperSlide(SwiperSlide);
    };

    const loadSwiperNavigation = async () => {
      const NavigationModule = await import('swiper').then((module) => ({ default: module.Navigation }));
      setNavigation(NavigationModule.default);
    };

    const loadSwiperPagination = async () => {
      const PaginationModule = await import('swiper').then((module) => ({ default: module.Pagination }));
      setPagination(PaginationModule.default);
    };

    loadSwiperModules();
    loadSwiperNavigation();
    loadSwiperPagination();
  }, []);

  return { Swiper, SwiperSlide, Navigation, Pagination };
};

export default SwiperLoader;

```

**- Route Based Code Splitting** ë¼ìš°í„° ê¸°ë°˜ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…ì€ íŽ˜ì´ì§€ë³„ë¡œ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…ì„ í•˜ëŠ” ê²ƒìž…ë‹ˆë‹¤. ì›¹ íŽ˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì‹œê°„ì€ íŽ˜ì´ì§€ ì „í™˜ì— ì–´ëŠ ì •ë„ ë°œìƒí•˜ë©° ëŒ€ë¶€ë¶„ íŽ˜ì´ì§€ë¥¼ í•œ ë²ˆì— ë Œë”ë§í•˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©ìžê°€ íŽ˜ì´ì§€ë¥¼ ë Œë”ë§í•˜ëŠ” ë™ì•ˆ ë‹¤ë¥¸ ìš”ì†Œì™€ ìƒí˜¸ìž‘ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ Next.jsëŠ” íŽ˜ì´ì§€ë³„ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…ì´ ê¸°ë³¸ ì œê³µë˜ê¸° ë•Œë¬¸ì— í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.

**- Component Code Splitting**

Loadable Componentsëž€? Reactê°€ ìžì²´ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” `React.lazy`ë‚˜ `React.suspense`ë„ ìžˆì§€ë§Œ `SSR`ê¹Œì§€ ì»¤ë²„ ê°€ëŠ¥í•˜ê³  ì‚¬ìš© ë°©ë²•ì´ ê±°ì˜ ë™ì¼í•œ Loadable Componentsë¥¼ íŽ˜ì´ìŠ¤ë¶ì—ì„œë„ ì¶”ì²œí•˜ê³  ìžˆìŠµë‹ˆë‹¤.

ëª¨ë‹¬ë“¤ì€ íŽ˜ì´ì§€ì—ì„œ ì²˜ìŒë¶€í„° í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì—, ì‚¬ìš©ìžê°€ ì–´ë–¤ ì•¡ì…˜(í´ë¦­)í–ˆì„ ë•Œ ë‚˜íƒ€ë‚˜ë„ë¡ Code Splittingì„ ì ìš©í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

```jsx
import React from 'react';
import styled from 'styled-components';
import * as C from '../../../../../constants';
import loadable from '@loadable/component';
const Category = loadable(() => import('./category'));
const Brand = loadable(() => import('./brand'));
const Price = loadable(() => import('./price'));
const Etc = loadable(() => import('./etc'));
/** *
*/
const Toggle = (props) => {
  const { id, brandDataList, isLoading } = props;
  const isCategory = id === C.FILTER.TOPIC.CATEGORY;
  const isBrand = id === C.FILTER.TOPIC.BRAND;
  const isPrice = id === C.FILTER.TOPIC.PRICE;
  const isEtc = id === C.FILTER.TOPIC.ETC;
  return (
    <S.Wrapper>
      {isCategory && <Category isLoading={isLoading} />}
      {isBrand && <Brand brandDataList={brandDataList} isLoading={isLoa
ding} />}
      {isPrice && <Price />}
      {isEtc && <Etc />}
    </S.Wrapper>
); };
const S = {
  Wrapper: styled.div`
    margin-top: 10px;
  `
};
export default Toggle;
```